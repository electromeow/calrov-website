<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Haberler</title>
    <link rel="stylesheet" href="./css/navbar.css" />
    <link rel="stylesheet" href="./css/footer.css" />
    <link rel="stylesheet" href="./css/body.css" />
    <link rel="stylesheet" href="./css/haberler.css" />
    <script
      src="https://kit.fontawesome.com/8c1dbeb99f.js"
      crossorigin="anonymous"
    ></script>
    <script>
      function toggleMenu() {
        document.querySelector("nav ul").classList.toggle("opened");
      }
    </script>
  </head>
  <body>
    <div class="container">
      <nav>
        <a href="./">
          <img src="./images/calrovlogo.png" alt="logo" />
          <h1>CALROV</h1>
        </a>
        <i class="fas fa-bars" name="hamburger" onclick="toggleMenu()"></i>
        <ul>
          <li><a href="./sponsorluk.html">Sponsorluk</a></li>
          <li><a href="./haberler.html">Haberler</a></li>
          <li><a href="./hakkimizda.html">Hakkımızda</a></li>
          <li><a href="./iletisim.html">İletişim</a></li>
        </ul>
      </nav>
      <div id="spacer"></div>
      <section>
        <div id="haberler"></div>
        <script>
          const urlParams = new URLSearchParams(window.location.search);
          let p;
          if (!urlParams.get("p")) {
            p = 1;
          } else {
            p = urlParams.get("p");
          }
          const firstpage = parseInt(p) === 1;
          let lastpage = false;
          for (let i = p * 5 - 4; i < p * 5 + 1; i++) {
            if (i === 1) {
              lastpage = true;
            }
            fetch(`./data/haberler/haber-${i}.json`).then((res) =>
              res.json().then((jsonres) => {
                document.querySelector(
                  "div#haberler"
                ).innerHTML += `<div class="haber"><a href="./haber.html?id=${i}"><img src="${jsonres.thumbnail}" alt="haber küçük resim" /><div><h1>${jsonres.title}</h1><p>${jsonres.summary}</p></a></div>`;
              })
            );
          }
        </script>
        <br />
        <div id="paginator">
          <a id="leftarrow"><i class="fas fa-chevron-left fa-2x"></i></a>
          <span id="pagenumber"></span>
          <a id="rightarrow"><i class="fas fa-chevron-right fa-2x"></i></a>
        </div>
        <script>
          if (!firstpage)
            document
              .querySelector("a#leftarrow")
              .setAttribute("href", `./haberler.html?p=${p - 1}`);
          document.querySelector("span#pagenumber").innerHTML = p;
          if (!lastpage)
            document
              .querySelector("a#rightarrow")
              .setAttribute("href", `./haberler.html?p=${p + 1}`);
        </script>
      </section>
      <br />
      <br />
      <footer>
        CALROV (C) 2021
        <div>
          <a href="https://instagram.com/calrovteam">
            <i class="fab fa-instagram fa-2x"></i>
            <span></span>
            @calrovteam</a
          ><br />
        </div>
        <div>
          <a href="mailto:calrov@gmail.com">
            <i class="far fa-envelope fa-2x"></i>
            <span></span>
            calrov@gmail.com</a
          ><br />
        </div>
      </footer>
      <br />
      <br />
    </div>
  </body>
</html>
